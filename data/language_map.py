"""
Language mapping dictionary for Truck Lot Tracker
English to Chinese translation pairs
"""

EN_TO_ZH = {
    "Changsheng - Truck Lot Tracker": "é•¿ç”Ÿ - å¡è½¦åœè½¦åœºç®¡ç†",
    "ðŸ“ˆ Dashboard": "ðŸ“ˆ ä»ªè¡¨ç›˜",
    "ðŸ‘¥ Customers": "ðŸ‘¥ å®¢æˆ·",
    "ðŸšš Trucks": "ðŸšš å¡è½¦",
    "ðŸ“ Contracts": "ðŸ“ åˆåŒ",
    "ðŸ’µ Billing": "ðŸ’µ è´¦åŠ¡",
    "ðŸ§¾ Invoices & Payments": "ðŸ§¾ å‘ç¥¨ä¸Žæ”¶æ¬¾",
    "â° Overdue": "â° é€¾æœŸ",
    "ðŸ“Š Monthly Statement": "ðŸ“Š æœˆåº¦æŠ¥è¡¨",
    "Language:": "è¯­è¨€:",
    "Search:": "æœç´¢:",
    "Search": "æœç´¢",
    "Find": "æŸ¥æ‰¾",
    "Delete Selected": "åˆ é™¤é€‰ä¸­",
    "Backup DB": "å¤‡ä»½æ•°æ®åº“",
    "Restore DB": "æ¢å¤æ•°æ®åº“",
    "Export CSV": "å¯¼å‡ºCSV",
    "Import CSV": "å¯¼å…¥CSV",
    "Add Customer": "æ·»åŠ å®¢æˆ·",
    "Name*": "å§“å*",
    "Phone": "ç”µè¯",
    "Company": "å…¬å¸",
    "Notes": "å¤‡æ³¨",
    "Search plate:": "è½¦ç‰Œæœç´¢:",
    "Clear": "æ¸…ç©º",
    "Add Truck": "æ·»åŠ å¡è½¦",
    "Plate*": "è½¦ç‰Œ*",
    "State": "å·ž",
    "Make": "å“ç‰Œ",
    "Model": "åž‹å·",
    "Customer": "å®¢æˆ·",
    "Refresh": "åˆ·æ–°",
    "Toggle Active/Inactive": "åˆ‡æ¢å¯ç”¨/åœç”¨",
    "Create Contract": "åˆ›å»ºåˆåŒ",
    "Customer*": "å®¢æˆ·*",
    "Contract scope": "åˆåŒèŒƒå›´",
    "Per truck": "æŒ‰å¡è½¦",
    "Customer-level": "å®¢æˆ·çº§",
    "Truck (if per truck)": "å¡è½¦ï¼ˆæŒ‰å¡è½¦ï¼‰",
    "Rate ($/mo)*": "æœˆè´¹($/æœˆ)*",
    "Start YYYY-MM-DD": "å¼€å§‹ YYYY-MM-DD",
    "End YYYY-MM-DD (optional)": "ç»“æŸ YYYY-MM-DDï¼ˆå¯é€‰ï¼‰",
    "Month Controls": "æœˆä»½æŽ§åˆ¶",
    "Billing Date Controls": "è®¡è´¹æ—¥æœŸæŽ§åˆ¶",
    "Month (YYYY-MM):": "æœˆä»½ (YYYY-MM):",
    "As-of Date (YYYY-MM-DD):": "æˆªæ­¢æ—¥æœŸ (YYYY-MM-DD):",
    "Today": "ä»Šå¤©",
    "Invoice Date (YYYY-MM-DD):": "å¼€ç¥¨æ—¥æœŸ (YYYY-MM-DD):",
    "Generate Invoices": "ç”Ÿæˆå‘ç¥¨",
    "Refresh List": "åˆ·æ–°åˆ—è¡¨",
    "Recalculate": "é‡æ–°è®¡ç®—",
    "Collapse All": "å…¨éƒ¨æŠ˜å ",
    "Expand All": "å…¨éƒ¨å±•å¼€",
    "Elapsed Months": "ç´¯è®¡æœˆæ•°",
    "Expected": "åº”æ”¶",
    "Outstanding": "æœªæ”¶",
    "Total Outstanding:": "æ€»æœªæ”¶:",
    "Contract ID": "åˆåŒç¼–å·",
    "Record Payment (select an invoice above)": "è®°å½•æ”¶æ¬¾ï¼ˆå…ˆé€‰æ‹©ä¸Šæ–¹å‘ç¥¨ï¼‰",
    "Invoice ID": "å‘ç¥¨ç¼–å·",
    "Amount": "é‡‘é¢",
    "Method": "æ–¹å¼",
    "Reference": "å‚è€ƒå·",
    "Record Payment": "è®°å½•æ”¶æ¬¾",
    "ðŸ’°  Record Payment": "ðŸ’°  è®°å½•æ”¶æ¬¾",
    "ðŸ“œ  View History": "ðŸ“œ  æŸ¥çœ‹åŽ†å²",
    "âš ï¸  Reset Payments": "âš ï¸  é‡ç½®ä»˜æ¬¾",
    "Shows invoices unpaid as of the selected date.": "æ˜¾ç¤ºæˆªæ­¢æ‰€é€‰æ—¥æœŸæœªæ”¯ä»˜å‘ç¥¨ã€‚",
    "Shows contracts with outstanding balance as of the selected date.": "æ˜¾ç¤ºæˆªæ­¢æ‰€é€‰æ—¥æœŸæœ‰æœªä»˜ä½™é¢çš„åˆåŒã€‚",
    "Refresh Statement": "åˆ·æ–°æŠ¥è¡¨",
    "Monthly Totals": "æœˆåº¦æ±‡æ€»",
    "Expected for month:": "æœ¬æœˆåº”æ”¶:",
    "Paid toward month invoices:": "æœ¬æœˆå·²æ”¶:",
    "Outstanding:": "æœªæ”¶:",
    # Right-click menus
    "View Ledger": "æŸ¥çœ‹è´¦æœ¬",
    "Generate PDF Invoice": "ç”ŸæˆPDFå‘ç¥¨",
    "View Payment History": "æŸ¥çœ‹ä»˜æ¬¾åŽ†å²",
    "Edit Contract": "ç¼–è¾‘åˆåŒ",
    "Fill Payment Form": "å¡«å†™æ”¶æ¬¾è¡¨å•",
    "Reset Payments": "é‡ç½®ä»˜æ¬¾",
    # Buttons / labels
    "Export XLSX": "å¯¼å‡ºXLSX",
    "Close": "å…³é—­",
    "Save Changes": "ä¿å­˜æ›´æ”¹",
    "Active": "å¯ç”¨",
    "Overdue as-of:": "é€¾æœŸæˆªæ­¢æ—¥:",
    "Overdue List": "é€¾æœŸåˆ—è¡¨",
    "Paid": "å·²ä»˜",
    "Balance": "ä½™é¢",
    "Status": "çŠ¶æ€",
    "Scope": "èŒƒå›´",
    "Rate": "è´¹çŽ‡",
    "Start": "å¼€å§‹",
    "End": "ç»“æŸ",
    "Months": "æœˆæ•°",
    "Month": "æœˆä»½",
    "Date": "æ—¥æœŸ",
    "ID": "ç¼–å·",
    "Name": "å§“å",
    "Plate": "è½¦ç‰Œ",
    "Type": "ç±»åž‹",
    "Match": "åŒ¹é…",
    "Detail": "è¯¦æƒ…",
    "Global Search": "å…¨å±€æœç´¢",
    "Customer:": "å®¢æˆ·:",
    "Find Customer": "æŸ¥æ‰¾å®¢æˆ·",
    "Search (plate/name):": "æœç´¢ï¼ˆè½¦ç‰Œ/å§“åï¼‰:",
    "Contract Start": "åˆåŒå¼€å§‹",
    "Contract End": "åˆåŒç»“æŸ",
    "Contract Cost": "åˆåŒè´¹ç”¨",
    "(Enter in any field)": "ï¼ˆåœ¨ä»»æ„å­—æ®µæŒ‰å›žè½¦ï¼‰",
    "(Search by name)": "ï¼ˆæŒ‰å§“åæœç´¢ï¼‰",
    "View Contract History": "æŸ¥çœ‹åˆåŒåŽ†å²",
    "View Trucks": "æŸ¥çœ‹å¡è½¦",
    "  â† Select a customer or plate row in the table below, then click an action": "  â† åœ¨ä¸‹æ–¹è¡¨æ ¼é€‰æ‹©å®¢æˆ·æˆ–åˆåŒè¡Œï¼Œç„¶åŽç‚¹å‡»æ“ä½œ",
    "âš ï¸ ": "âš ï¸ ",
    # Histories tab
    "ðŸ•‘ Histories": "ðŸ•‘ åŽ†å²è®°å½•",
    "Blackbox Log (all actions and events)": "é»‘åŒ£å­æ—¥å¿—ï¼ˆæ‰€æœ‰æ“ä½œå’Œäº‹ä»¶ï¼‰",
    "Total Active Contracts": "æ´»è·ƒåˆåŒæ€»æ•°",
    "Expected This Month": "æœ¬æœˆåº”æ”¶",
    "Total Outstanding": "æ€»æœªæ”¶æ¬¾",
    "Overdue 30+ Days": "é€¾æœŸ30å¤©ä»¥ä¸Š",
    "Oldest Unpaid Invoice": "æœ€æ—©æœªä»˜å‘ç¥¨",
    "None": "æ— ",
    # â”€â”€ Main window strings with emoji prefixes â”€â”€
    "ðŸ”´ Delete Selected": "ðŸ”´ åˆ é™¤é€‰ä¸­",
    "ðŸŸ¢ Add Customer": "ðŸŸ¢ æ·»åŠ å®¢æˆ·",
    "ðŸŸ¢ Add Truck": "ðŸŸ¢ æ·»åŠ å¡è½¦",
    "ðŸŸ¢ Create Contract": "ðŸŸ¢ åˆ›å»ºåˆåŒ",
    "â¬‡ Export XLSX": "â¬‡ å¯¼å‡ºXLSX",
    # â”€â”€ Dashboard â”€â”€
    "As of:": "æˆªæ­¢æ—¥:",
    "Refresh KPI": "åˆ·æ–°æŒ‡æ ‡",
    # â”€â”€ Statement â”€â”€
    "Chart:": "å›¾è¡¨:",
    "Expected Monthly Revenue (Last 12 Months)": "é¢„æœŸæœˆæ”¶å…¥ï¼ˆè¿‘12ä¸ªæœˆï¼‰",
    # â”€â”€ Top bar â”€â”€
    "Theme:": "ä¸»é¢˜:",
    # â”€â”€ Trucks tab â”€â”€
    "Trucks Parked": "åœæ”¾è½¦è¾†",
    # â”€â”€ Dialog labels â”€â”€
    "Plate:": "è½¦ç‰Œ:",
    "(customer-level)": "ï¼ˆå®¢æˆ·çº§ï¼‰",
    "Outstanding Balance:": "æœªä»˜ä½™é¢:",
    "Amount:": "é‡‘é¢:",
    "Payment Date:": "ä»˜æ¬¾æ—¥æœŸ:",
    "Method:": "æ–¹å¼:",
    "Reference:": "å‚è€ƒå·:",
    "Notes:": "å¤‡æ³¨:",
    "Cancel": "å–æ¶ˆ",
    "Select": "é€‰æ‹©",
    "Confirm Import": "ç¡®è®¤å¯¼å…¥",
    "Search customer:": "æœç´¢å®¢æˆ·:",
    "Import Preview": "å¯¼å…¥é¢„è§ˆ",
    "Contract Details": "åˆåŒè¯¦æƒ…",
    "Paid Date": "ä»˜æ¬¾æ—¥æœŸ",
    "Invoice Month": "å‘ç¥¨æœˆä»½",
    "Ledger Entries": "è´¦æœ¬è®°å½•",
    "Entry": "æ¡ç›®",
    "Date / Period": "æ—¥æœŸ/æœŸé—´",
    "Billed": "å·²å¼€è´¦",
    "Scope / Method": "èŒƒå›´/æ–¹å¼",
    "Notes / Reference": "å¤‡æ³¨/å‚è€ƒå·",
    "Rate ($/mo)": "æœˆè´¹($/æœˆ)",
    "Start Date": "å¼€å§‹æ—¥æœŸ",
}

# Create reverse mapping (Chinese to English)
ZH_TO_EN = {v: k for k, v in EN_TO_ZH.items()}


def translate_widget_tree(root, language: str) -> None:
    """Translate all text attributes in a widget tree.
    
    Call this after building a dialog to apply the current language.
    ``language`` should be ``"zh"`` or ``"en"``.
    """
    mapping = EN_TO_ZH if language == "zh" else ZH_TO_EN
    _walk(root, mapping)


def _walk(widget, mapping: dict) -> None:
    try:
        text_value = widget.cget("text")
    except Exception:
        text_value = None
    if isinstance(text_value, str) and text_value in mapping:
        try:
            widget.configure(text=mapping[text_value])
        except Exception:
            pass
    for child in widget.winfo_children():
        _walk(child, mapping)
